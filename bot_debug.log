2025-04-19 14:43:56,906 - asyncio - DEBUG - Using selector: EpollSelector
2025-04-19 14:43:56,906 - bot_debug - INFO - Starting Telegram bot debugging
2025-04-19 14:43:56,916 - bot_debug - INFO - Bot token: Valid format (first 5 chars): 81260...
2025-04-19 14:43:58,769 - bot_debug - INFO - Testing bot initialization...
2025-04-19 14:43:58,782 - bot_debug - INFO - Bot initialized successfully
2025-04-19 14:43:58,782 - bot_debug - INFO - Testing API connection...
2025-04-19 14:43:59,340 - bot_debug - INFO - Bot info: gsbookingbot (ID: 8126004060)
2025-04-19 14:43:59,593 - bot_debug - INFO - Testing dispatcher initialization...
2025-04-19 14:43:59,595 - bot_debug - INFO - Dispatcher initialized successfully
2025-04-19 14:43:59,595 - bot_debug - INFO - Testing start_bot function directly from bot.main...
2025-04-19 14:43:59,876 - root - INFO - Using Telegram Payments TEST mode
2025-04-19 14:43:59,876 - bot_debug - INFO - Successfully imported start_bot function
2025-04-19 14:43:59,877 - bot_debug - INFO - Testing database initialization...
2025-04-19 14:44:03,951 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-19 14:44:03,952 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-19 14:44:04,409 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-19 14:44:04,409 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-19 14:44:04,866 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-19 14:44:04,866 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-19 14:44:05,323 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-19 14:44:05,328 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-19 14:44:05,328 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {'table_name': 'telegram_users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-19 14:44:05,786 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-19 14:44:05,786 - sqlalchemy.engine.Engine - INFO - [cached since 0.4584s ago] {'table_name': 'staff', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-19 14:44:06,015 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-19 14:44:06,015 - sqlalchemy.engine.Engine - INFO - [cached since 0.6877s ago] {'table_name': 'staff_schedules', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-19 14:44:06,245 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-19 14:44:06,245 - sqlalchemy.engine.Engine - INFO - [cached since 0.9171s ago] {'table_name': 'bookings', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-19 14:44:06,477 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-19 14:44:06,477 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {'typname_1': 'bookingstatus', 'nspname_1': 'pg_catalog'}
2025-04-19 14:44:06,706 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-19 14:44:06,934 - bot_debug - INFO - Database initialized successfully
2025-04-19 14:44:06,934 - bot_debug - INFO - Testing keyboard format...
2025-04-19 14:44:06,935 - bot_debug - INFO - Language keyboard format: keyboard=[[KeyboardButton(text='English üá¨üáß', request_users=None, request_chat=None, request_contact=None, request_location=None, request_poll=None, web_app=None, request_user=None)], [KeyboardButton(text='–†—É—Å—Å–∫–∏–π üá∑üá∫', request_users=None, request_chat=None, request_contact=None, request_location=None, request_poll=None, web_app=None, request_user=None)], [KeyboardButton(text="O'zbekcha üá∫üáø", request_users=None, request_chat=None, request_contact=None, request_location=None, request_poll=None, web_app=None, request_user=None)]] is_persistent=None resize_keyboard=True one_time_keyboard=True input_field_placeholder=None selective=None
2025-04-19 14:44:06,935 - bot_debug - INFO - Main menu keyboard format: keyboard=[[KeyboardButton(text='üìÖ Book Appointment', request_users=None, request_chat=None, request_contact=None, request_location=None, request_poll=None, web_app=None, request_user=None)], [KeyboardButton(text='üìã My Bookings', request_users=None, request_chat=None, request_contact=None, request_location=None, request_poll=None, web_app=None, request_user=None)], [KeyboardButton(text='üåê Change Language', request_users=None, request_chat=None, request_contact=None, request_location=None, request_poll=None, web_app=None, request_user=None), KeyboardButton(text='‚ùì Help', request_users=None, request_chat=None, request_contact=None, request_location=None, request_poll=None, web_app=None, request_user=None)]] is_persistent=None resize_keyboard=True one_time_keyboard=None input_field_placeholder=None selective=None
2025-04-19 14:44:06,935 - bot_debug - INFO - Keyboard format appears correct
2025-04-19 14:44:06,935 - bot_debug - INFO - ==== Test Results Summary ====
2025-04-19 14:44:06,935 - bot_debug - INFO - bot_token: ‚úÖ PASS
2025-04-19 14:44:06,935 - bot_debug - INFO - bot_initialization: ‚úÖ PASS
2025-04-19 14:44:06,935 - bot_debug - INFO - dispatcher: ‚úÖ PASS
2025-04-19 14:44:06,936 - bot_debug - INFO - bot_polling: ‚úÖ PASS
2025-04-19 14:44:06,936 - bot_debug - INFO - database: ‚úÖ PASS
2025-04-19 14:44:06,936 - bot_debug - INFO - keyboard_format: ‚úÖ PASS
